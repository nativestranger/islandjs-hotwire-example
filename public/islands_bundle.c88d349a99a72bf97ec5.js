/*! For license information please see islands_bundle.c88d349a99a72bf97ec5.js.LICENSE.txt */
(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=React;var r=e.n(t);function n(e){var t=document.getElementById(e);if(!t)return console.warn("IslandJS Turbo: Container ".concat(e," not found")),{};var r=t.dataset.initialState;if(!r)return{};try{return JSON.parse(r)}catch(e){return console.warn("IslandJS Turbo: Failed to parse initial state",e),{}}}function o(e,t){var r=document.getElementById(e);if(!r)return console.warn("IslandJS Turbo: Container ".concat(e," not found for caching")),function(){};try{var n=JSON.stringify(t);r.dataset.initialState=n}catch(e){console.warn("IslandJS Turbo: Failed to immediately serialize state",e)}}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const c=function(e){var i=e.containerId,c=n(i),l=a((0,t.useState)(c.count||0),2),s=l[0],u=l[1],d=a((0,t.useState)(c.message||"Hello from IslandJS Rails!"),2),f=d[0],m=d[1],p=a((0,t.useState)(c.customMessage||""),2),b=p[0],v=p[1],y={count:s,message:f,customMessage:b};(0,t.useEffect)(function(){return o(i,y,!0)},[i,s,f,b]);return r().createElement("div",{style:{padding:"20px",border:"2px solid #4F46E5",borderRadius:"8px",backgroundColor:"#F8FAFC",textAlign:"center",fontFamily:"system-ui, sans-serif"}},r().createElement("h2",{style:{color:"#4F46E5",margin:"0 0 16px 0"}},"ðŸï¸ React + IslandjsRails (Turbo-Cache Compatible)"),r().createElement("p",{style:{margin:"0 0 16px 0",fontSize:"18px"}},f),r().createElement("div",{style:{margin:"16px 0"}},r().createElement("input",{type:"text",placeholder:"Enter custom message",value:b,onChange:function(e){v(e.target.value)},style:{padding:"8px",marginRight:"8px",border:"1px solid #D1D5DB",borderRadius:"4px",fontSize:"14px"}}),r().createElement("button",{onClick:function(){b.trim()&&(m(b.trim()),v(""))},style:{padding:"8px 16px",backgroundColor:"#059669",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",marginRight:"8px"}},"Apply Message")),r().createElement("button",{onClick:function(){return u(s+1)},style:{padding:"8px 16px",backgroundColor:"#4F46E5",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px"}},"Clicked ",s," times"),r().createElement("div",{style:{marginTop:"16px",fontSize:"12px",color:"#6B7280",textAlign:"left",backgroundColor:"#F9FAFB",padding:"12px",borderRadius:"4px"}},r().createElement("strong",null,"Turbo-Cache Demo:"),r().createElement("br",null),"â€¢ Navigate away and back - your count and message persist!",r().createElement("br",null),"â€¢ Container ID: ",r().createElement("code",null,i),r().createElement("br",null),"â€¢ State: ",r().createElement("code",null,JSON.stringify(y))))};function l(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function a(r,n,o,a){var l=n&&n.prototype instanceof c?n:c,u=Object.create(l.prototype);return s(u,"_invoke",function(r,n,o){var a,c,l,s=0,u=o||[],d=!1,f={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,r){return a=t,c=0,l=e,f.n=r,i}};function m(r,n){for(c=r,l=n,t=0;!d&&s&&!o&&t<u.length;t++){var o,a=u[t],m=f.p,p=a[2];r>3?(o=p===n)&&(l=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=m&&((o=r<2&&m<a[1])?(c=0,f.v=n,f.n=a[1]):m<p&&(o=r<3||a[0]>n||n>p)&&(a[4]=r,a[5]=n,f.n=p,c=0))}if(o||r>1)return i;throw d=!0,n}return function(o,u,p){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&m(u,p),c=u,l=p;(t=c<2?e:l)||!d;){a||(c?c<3?(c>1&&(f.n=-1),m(c,l)):f.n=l:f.v=l);try{if(s=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(d=f.n<0)?l:r.call(n,f))!==i)break}catch(t){a=e,c=1,l=t}finally{s=1}}return{value:t,done:d}}}(r,o,a),!0),u}var i={};function c(){}function u(){}function d(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(s(t={},n,function(){return this}),t),m=d.prototype=c.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e}return u.prototype=d,s(m,"constructor",d),s(d,"constructor",u),u.displayName="GeneratorFunction",s(d,o,"GeneratorFunction"),s(m),s(m,o,"Generator"),s(m,n,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),(l=function(){return{w:a,m:p}})()}function s(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}s=function(e,t,r,n){function a(t,r){s(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},s(e,t,r,n)}function u(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){s=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return p(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const b=function(e){var o=e.containerId,a=n(o),i=a.postId,c=a.initialReactions||[],s=f((0,t.useState)(c),2),m=s[0],p=s[1],b=f((0,t.useState)(!1),2),v=b[0],y=b[1],g=f((0,t.useState)(!1),2),h=g[0],x=g[1],w=(0,t.useRef)(null);if(console.log("Reactions component mounted with:",{postId:i,containerId:o}),!i)return r().createElement("div",{className:"text-sm text-gray-500"},"Unable to load reactions");(0,t.useEffect)(function(){function e(e){w.current&&!w.current.contains(e.target)&&y(!1)}return document.addEventListener("mousedown",e),function(){return document.removeEventListener("mousedown",e)}},[]);var E=m.reduce(function(e,t){return e[t.emoji]||(e[t.emoji]={emoji:t.emoji,count:0,sessionIds:[]}),e[t.emoji].count++,e[t.emoji].sessionIds.push(t.session_id),e},{}),S=function(){var e,t=(e=l().m(function e(t){var r,n,o,a,c,s;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!h&&i){e.n=1;break}return console.error("Cannot toggle reaction: postId is missing"),e.a(2);case 1:if(x(!0),e.p=2,n=null===(r=document.querySelector('meta[name="csrf-token"]'))||void 0===r?void 0:r.getAttribute("content"),!m.find(function(e){return e.emoji===t})){e.n=4;break}return e.n=3,fetch("/api/v1/posts/".concat(i,"/reactions/").concat(encodeURIComponent(t)),{method:"DELETE",headers:{"X-CSRF-Token":n,Accept:"application/json"}});case 3:(o=e.v).ok?p(function(e){return e.filter(function(e){return e.emoji!==t})}):console.error("Failed to remove reaction:",o.status,o.statusText),e.n=8;break;case 4:return e.n=5,fetch("/api/v1/posts/".concat(i,"/reactions"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":n,Accept:"application/json"},body:JSON.stringify({reaction:{emoji:t}})});case 5:if(!(a=e.v).ok){e.n=7;break}return e.n=6,a.json();case 6:c=e.v,p(function(e){return[].concat(u(e),[c.reaction])}),e.n=8;break;case 7:console.error("Failed to add reaction:",a.status,a.statusText);case 8:e.n=10;break;case 9:e.p=9,s=e.v,console.error("Error toggling reaction:",s);case 10:return e.p=10,x(!1),y(!1),e.f(10);case 11:return e.a(2)}},e,null,[[2,9,10,11]])}),function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){d(a,n,o,i,c,"next",e)}function c(e){d(a,n,o,i,c,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}();return r().createElement("div",{className:"flex flex-col gap-2"},r().createElement("div",{className:"relative order-2",ref:w},r().createElement("button",{onClick:function(){return y(!v)},disabled:h,className:"\n            inline-flex items-center justify-center w-7 h-7 sm:w-8 sm:h-8 rounded-full\n            bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200\n            text-indigo-600 hover:from-indigo-100 hover:to-purple-100 hover:border-indigo-300\n            transition-all duration-200 hover:scale-110 hover:shadow-md active:scale-100\n            ".concat(h?"opacity-50 cursor-not-allowed":"cursor-pointer","\n          "),title:"Add reaction"},r().createElement("svg",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},r().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"}))),v&&r().createElement("div",{className:"absolute bottom-full left-0 mb-2 p-3 sm:p-4 bg-white rounded-lg sm:rounded-xl shadow-2xl border border-slate-200 z-50 w-[280px] sm:w-[320px]"},r().createElement("div",{className:"grid grid-cols-6 gap-1.5 sm:gap-2"},["ðŸ‘","â¤ï¸","ðŸ˜‚","ðŸ˜®","ðŸ˜¢","ðŸ˜¡","ðŸš€","ðŸŽ‰","ðŸ”¥","âœ¨","ðŸ™","ðŸ’¯"].map(function(e){return r().createElement("button",{key:e,onClick:function(){return function(e){S(e)}(e)},disabled:h,className:"\n                    w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center rounded-lg sm:rounded-xl\n                    bg-gradient-to-br from-white to-slate-50 border border-slate-200\n                    transition-all duration-200 text-xl sm:text-2xl\n                    hover:scale-110 sm:hover:scale-125 hover:shadow-lg hover:from-indigo-50 hover:to-purple-50\n                    hover:border-indigo-200 cursor-pointer hover:z-10\n                  ",title:"React with ".concat(e)},e)})))),Object.keys(E).length>0&&r().createElement("div",{className:"flex items-center flex-wrap gap-1.5 sm:gap-2 order-1"},Object.entries(E).map(function(e){var t=f(e,2),n=t[0],o=t[1];return r().createElement("button",{key:n,onClick:function(){return S(n)},disabled:h,className:"\n                inline-flex items-center px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm rounded-full transition-all duration-200\n                bg-gradient-to-r from-slate-50 to-slate-100 border border-slate-200\n                hover:from-slate-100 hover:to-slate-200 hover:border-slate-300\n                ".concat(h?"opacity-50 cursor-not-allowed":"hover:scale-110 hover:shadow-md active:scale-100 cursor-pointer","\n              ")},r().createElement("span",{className:"text-base sm:text-lg mr-1 sm:mr-1.5"},n),r().createElement("span",{className:"font-semibold text-slate-700"},o.count))})))};window.islandjsRails={HelloWorld:c,Reactions:b}})();