/*! For license information please see islands_bundle.5f05aa44390874271736.js.LICENSE.txt */
(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=React;var n=e.n(t);function r(e){var t=document.getElementById(e);if(!t)return console.warn("IslandJS Turbo: Container ".concat(e," not found")),{};var n=t.dataset.initialState;if(!n)return{};try{return JSON.parse(n)}catch(e){return console.warn("IslandJS Turbo: Failed to parse initial state",e),{}}}function o(e,t){var n=document.getElementById(e);if(!n)return console.warn("IslandJS Turbo: Container ".concat(e," not found for caching")),function(){};try{var r=JSON.stringify(t);n.dataset.initialState=r}catch(e){console.warn("IslandJS Turbo: Failed to immediately serialize state",e)}}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const l=function(e){var i=e.containerId,l=r(i),c=a((0,t.useState)(l.count||0),2),s=c[0],u=c[1],d=a((0,t.useState)(l.message||"Hello from IslandJS Rails!"),2),f=d[0],m=d[1],p=a((0,t.useState)(l.customMessage||""),2),v=p[0],b=p[1],g={count:s,message:f,customMessage:v};(0,t.useEffect)(function(){return o(i,g,!0)},[i,s,f,v]);return n().createElement("div",{style:{padding:"20px",border:"2px solid #4F46E5",borderRadius:"8px",backgroundColor:"#F8FAFC",textAlign:"center",fontFamily:"system-ui, sans-serif"}},n().createElement("h2",{style:{color:"#4F46E5",margin:"0 0 16px 0"}},"🏝️ React + IslandjsRails (Turbo-Cache Compatible)"),n().createElement("p",{style:{margin:"0 0 16px 0",fontSize:"18px"}},f),n().createElement("div",{style:{margin:"16px 0"}},n().createElement("input",{type:"text",placeholder:"Enter custom message",value:v,onChange:function(e){b(e.target.value)},style:{padding:"8px",marginRight:"8px",border:"1px solid #D1D5DB",borderRadius:"4px",fontSize:"14px"}}),n().createElement("button",{onClick:function(){v.trim()&&(m(v.trim()),b(""))},style:{padding:"8px 16px",backgroundColor:"#059669",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",marginRight:"8px"}},"Apply Message")),n().createElement("button",{onClick:function(){return u(s+1)},style:{padding:"8px 16px",backgroundColor:"#4F46E5",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px"}},"Clicked ",s," times"),n().createElement("div",{style:{marginTop:"16px",fontSize:"12px",color:"#6B7280",textAlign:"left",backgroundColor:"#F9FAFB",padding:"12px",borderRadius:"4px"}},n().createElement("strong",null,"Turbo-Cache Demo:"),n().createElement("br",null),"• Navigate away and back - your count and message persist!",n().createElement("br",null),"• Container ID: ",n().createElement("code",null,i),n().createElement("br",null),"• State: ",n().createElement("code",null,JSON.stringify(g))))};function c(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof l?r:l,u=Object.create(c.prototype);return s(u,"_invoke",function(n,r,o){var a,l,c,s=0,u=o||[],d=!1,f={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return a=t,l=0,c=e,f.n=n,i}};function m(n,r){for(l=n,c=r,t=0;!d&&s&&!o&&t<u.length;t++){var o,a=u[t],m=f.p,p=a[2];n>3?(o=p===r)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=m&&((o=n<2&&m<a[1])?(l=0,f.v=r,f.n=a[1]):m<p&&(o=n<3||a[0]>r||r>p)&&(a[4]=n,a[5]=r,f.n=p,l=0))}if(o||n>1)return i;throw d=!0,r}return function(o,u,p){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&m(u,p),l=u,c=p;(t=l<2?e:c)||!d;){a||(l?l<3?(l>1&&(f.n=-1),m(l,c)):f.n=c:f.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:d}}}(n,o,a),!0),u}var i={};function l(){}function u(){}function d(){}t=Object.getPrototypeOf;var f=[][r]?t(t([][r]())):(s(t={},r,function(){return this}),t),m=d.prototype=l.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e}return u.prototype=d,s(m,"constructor",d),s(d,"constructor",u),u.displayName="GeneratorFunction",s(d,o,"GeneratorFunction"),s(m),s(m,o,"Generator"),s(m,r,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),(c=function(){return{w:a,m:p}})()}function s(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}s=function(e,t,n,r){function a(t,n){s(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},s(e,t,n,r)}function u(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return p(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const v=function(e){var o=e.containerId,a=r(o),i=a.postId,l=a.currentSessionId,s=a.initialReactions||[],m=f((0,t.useState)(s),2),p=m[0],v=m[1],b=f((0,t.useState)(!1),2),g=b[0],y=b[1],h=f((0,t.useState)(!1),2),x=h[0],E=h[1],w=(0,t.useRef)(null);if(console.log("Reactions component mounted with:",{postId:i,currentSessionId:l,containerId:o}),!i)return n().createElement("div",{className:"text-sm text-gray-500"},"Unable to load reactions");(0,t.useEffect)(function(){function e(e){w.current&&!w.current.contains(e.target)&&y(!1)}return document.addEventListener("mousedown",e),function(){return document.removeEventListener("mousedown",e)}},[]);var S=p.reduce(function(e,t){return e[t.emoji]||(e[t.emoji]={emoji:t.emoji,count:0,sessionIds:[],userHasReacted:!1}),e[t.emoji].count++,e[t.emoji].sessionIds.push(t.session_id),t.session_id===l&&(e[t.emoji].userHasReacted=!0),e},{}),j=function(){var e,t=(e=c().m(function e(t){var n,r,o,a,s,d,f,m;return c().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!x&&i){e.n=1;break}return console.error("Cannot toggle reaction: postId is missing"),e.a(2);case 1:if(E(!0),e.p=2,r=null===(n=document.querySelector('meta[name="csrf-token"]'))||void 0===n?void 0:n.getAttribute("content"),o=p.find(function(e){return e.emoji===t&&e.session_id===l}),console.log("Toggle reaction check:",{emoji:t,currentSessionId:l,userReaction:o,reactions:p}),!o){e.n=4;break}return e.n=3,fetch("/api/v1/posts/".concat(i,"/reactions/").concat(encodeURIComponent(t)),{method:"DELETE",headers:{"X-CSRF-Token":r,Accept:"application/json"}});case 3:(a=e.v).ok?v(function(e){return e.filter(function(e){return!(e.emoji===t&&e.session_id===l)})}):console.error("Failed to remove reaction:",a.status,a.statusText),e.n=9;break;case 4:return e.n=5,fetch("/api/v1/posts/".concat(i,"/reactions"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":r,Accept:"application/json"},body:JSON.stringify({reaction:{emoji:t}})});case 5:if(!(s=e.v).ok){e.n=7;break}return e.n=6,s.json();case 6:d=e.v,console.log("Reaction added response:",d),v(function(e){return[].concat(u(e),[d.reaction])}),e.n=9;break;case 7:return e.n=8,s.json();case 8:f=e.v,console.error("Failed to add reaction:",f.error||f.errors);case 9:e.n=11;break;case 10:e.p=10,m=e.v,console.error("Error toggling reaction:",m);case 11:return e.p=11,E(!1),y(!1),e.f(11);case 12:return e.a(2)}},e,null,[[2,10,11,12]])}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){d(a,r,o,i,l,"next",e)}function l(e){d(a,r,o,i,l,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}();return n().createElement("div",{className:"flex items-center flex-wrap gap-1.5 sm:gap-2"},n().createElement("div",{className:"relative",ref:w},n().createElement("button",{onClick:function(){return y(!g)},disabled:x,className:"\n            inline-flex items-center px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm rounded-full transition-all duration-200\n            bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200\n            hover:from-indigo-100 hover:to-purple-100 hover:border-indigo-300\n            ".concat(x?"opacity-50 cursor-not-allowed":"hover:scale-110 hover:shadow-md active:scale-100 cursor-pointer","\n          "),title:"Add reaction"},n().createElement("svg",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})),n().createElement("span",{className:"ml-1 font-medium text-indigo-600"},"Add")),g&&n().createElement("div",{className:"absolute bottom-full left-0 mb-2 p-3 sm:p-4 bg-white rounded-lg sm:rounded-xl shadow-2xl border border-slate-200 z-50 w-[280px] sm:w-[320px]"},n().createElement("div",{className:"grid grid-cols-6 gap-1.5 sm:gap-2"},["👍","❤️","😂","😮","😢","😡","🚀","🎉","🔥","✨","🙏","💯"].map(function(e){return n().createElement("button",{key:e,onClick:function(){return function(e){j(e)}(e)},disabled:x,className:"\n                    w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center rounded-lg sm:rounded-xl\n                    bg-gradient-to-br from-white to-slate-50 border border-slate-200\n                    transition-all duration-200 text-xl sm:text-2xl\n                    hover:scale-110 sm:hover:scale-125 hover:shadow-lg hover:from-indigo-50 hover:to-purple-50\n                    hover:border-indigo-200 cursor-pointer hover:z-10\n                  ",title:"React with ".concat(e)},e)})))),Object.entries(S).map(function(e){var t=f(e,2),r=t[0],o=t[1];return n().createElement("button",{key:r,onClick:function(){return j(r)},disabled:x,className:"\n            inline-flex items-center px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm rounded-full transition-all duration-200\n            ".concat(o.userHasReacted?"bg-gradient-to-r from-indigo-100 to-purple-100 border-2 border-indigo-400 hover:from-indigo-200 hover:to-purple-200":"bg-gradient-to-r from-slate-50 to-slate-100 border border-slate-200 hover:from-slate-100 hover:to-slate-200 hover:border-slate-300","\n            ").concat(x?"opacity-50 cursor-not-allowed":"hover:scale-110 hover:shadow-md active:scale-100 cursor-pointer","\n          "),title:o.userHasReacted?"Click to remove your reaction":"Click to add your reaction"},n().createElement("span",{className:"text-base sm:text-lg mr-1 sm:mr-1.5"},r),n().createElement("span",{className:"font-semibold ".concat(o.userHasReacted?"text-indigo-700":"text-slate-700")},o.count))}))};function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const y=function(e){var o=r(e.containerId),a=o.options||[],i=o.targetInputId,l=o.placeholder||"Select an option...",c=o.label||null,s=b((0,t.useState)(!1),2),u=s[0],d=s[1],f=b((0,t.useState)(""),2),m=f[0],p=f[1],v=b((0,t.useState)(""),2),g=v[0],y=v[1],h=(0,t.useRef)(null),x=(0,t.useRef)(null),E=a.filter(function(e){return e.label.toLowerCase().includes(g.toLowerCase())});(0,t.useEffect)(function(){var e=function(e){h.current&&!h.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",e),function(){return document.removeEventListener("mousedown",e)}},[]),(0,t.useEffect)(function(){var e=document.getElementById(i);if(e&&m){e.value=m;var t=new Event("change",{bubbles:!0});e.dispatchEvent(t)}},[m,i]);return n().createElement("div",{className:"relative",ref:h},c&&n().createElement("label",{className:"block text-sm font-medium text-slate-700 mb-2"},c),n().createElement("div",{className:"relative"},n().createElement("input",{ref:x,type:"text",value:function(){if(g&&u)return g;var e=a.find(function(e){return e.value===m});return e?e.label:""}(),onChange:function(e){y(e.target.value),d(!0)},onClick:function(){d(!u),u||y("")},placeholder:l,className:"w-full px-4 py-3 pr-10 border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200 placeholder-slate-400 cursor-pointer"}),n().createElement("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},n().createElement("svg",{className:"h-5 w-5 text-slate-400 transition-transform duration-200 ".concat(u?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})))),u&&n().createElement("div",{className:"absolute z-10 w-full mt-2 bg-white border border-slate-200 rounded-xl shadow-lg max-h-60 overflow-auto"},0===E.length?n().createElement("div",{className:"px-4 py-3 text-sm text-slate-500"},"No options found"):n().createElement("ul",{className:"py-1"},E.map(function(e){return n().createElement("li",{key:e.value,onClick:function(){return function(e){p(e.value),y(e.label),d(!1)}(e)},className:"px-4 py-3 text-sm cursor-pointer transition-colors duration-150 hover:bg-indigo-50 ".concat(m===e.value?"bg-indigo-50 text-indigo-700 font-medium":"text-slate-700")},n().createElement("div",{className:"flex items-center justify-between"},n().createElement("span",null,e.label),m===e.value&&n().createElement("svg",{className:"h-4 w-4 text-indigo-600",fill:"currentColor",viewBox:"0 0 20 20"},n().createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"}))))}))))};window.islandjsRails={HelloWorld:l,Reactions:v,Combobox:y}})();